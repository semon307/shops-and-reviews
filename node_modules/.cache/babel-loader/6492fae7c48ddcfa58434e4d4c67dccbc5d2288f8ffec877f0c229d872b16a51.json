{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nexport const useEffectOnce = effect => {\n  _s();\n  const destroyFunc = useRef();\n  const effectCalled = useRef(false);\n  const renderAfterCalled = useRef(false);\n  const [val, setVal] = useState(0);\n  if (effectCalled.current) {\n    renderAfterCalled.current = true;\n  }\n  useEffect(() => {\n    if (!effectCalled.current) {\n      destroyFunc.current = effect();\n      effectCalled.current = true;\n    }\n    setVal(val + 1);\n    return () => {\n      if (!renderAfterCalled.current) {\n        return;\n      }\n      if (destroyFunc.current) {\n        destroyFunc.current();\n      }\n    };\n  }, []);\n};\n_s(useEffectOnce, \"HYhMZy6Xz6sFfDRJNxQPOEPefdA=\");","map":{"version":3,"names":["useEffect","useRef","useState","useEffectOnce","effect","_s","destroyFunc","effectCalled","renderAfterCalled","val","setVal","current"],"sources":["/Applications/work/test_tasks/coding-challenge-consumer-semen/src/common/hooks/useEffectOnce.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nexport const useEffectOnce = (effect: () => void | (() => void)) => {\n  const destroyFunc = useRef<void | (() => void)>();\n  const effectCalled = useRef(false);\n  const renderAfterCalled = useRef(false);\n  const [val, setVal] = useState<number>(0);\n\n  if (effectCalled.current) {\n    renderAfterCalled.current = true;\n  }\n\n  useEffect(() => {\n    if (!effectCalled.current) {\n      destroyFunc.current = effect();\n      effectCalled.current = true;\n    }\n\n    setVal(val + 1);\n\n    return () => {\n      if (!renderAfterCalled.current) {\n        return;\n      }\n      if (destroyFunc.current) {\n        destroyFunc.current();\n      }\n    };\n  }, []);\n};\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,OAAO,MAAMC,aAAa,GAAIC,MAAiC,IAAK;EAAAC,EAAA;EAClE,MAAMC,WAAW,GAAGL,MAAM,CAAsB,CAAC;EACjD,MAAMM,YAAY,GAAGN,MAAM,CAAC,KAAK,CAAC;EAClC,MAAMO,iBAAiB,GAAGP,MAAM,CAAC,KAAK,CAAC;EACvC,MAAM,CAACQ,GAAG,EAAEC,MAAM,CAAC,GAAGR,QAAQ,CAAS,CAAC,CAAC;EAEzC,IAAIK,YAAY,CAACI,OAAO,EAAE;IACxBH,iBAAiB,CAACG,OAAO,GAAG,IAAI;EAClC;EAEAX,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,YAAY,CAACI,OAAO,EAAE;MACzBL,WAAW,CAACK,OAAO,GAAGP,MAAM,CAAC,CAAC;MAC9BG,YAAY,CAACI,OAAO,GAAG,IAAI;IAC7B;IAEAD,MAAM,CAACD,GAAG,GAAG,CAAC,CAAC;IAEf,OAAO,MAAM;MACX,IAAI,CAACD,iBAAiB,CAACG,OAAO,EAAE;QAC9B;MACF;MACA,IAAIL,WAAW,CAACK,OAAO,EAAE;QACvBL,WAAW,CAACK,OAAO,CAAC,CAAC;MACvB;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACN,EAAA,CA3BWF,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}