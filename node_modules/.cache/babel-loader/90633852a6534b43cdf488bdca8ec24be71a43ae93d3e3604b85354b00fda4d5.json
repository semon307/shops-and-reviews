{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { reviewsApi } from '../api/reviews-api';\nconst initialState = {\n  reviews: {},\n  loading: false,\n  error: null\n};\nconst slice = createSlice({\n  name: 'ReviewsReducer',\n  initialState: initialState,\n  reducers: {\n    setReviewsAC(state, action) {\n      state.reviews[action.payload.tsId] = action.payload.reviews;\n    },\n    setLoadingAC(state, action) {\n      state.loading = action.payload;\n    },\n    setErrorAC(state, action) {\n      state.error = action.payload;\n    }\n  }\n});\nexport const reviewsReducer = slice.reducer;\nexport const setReviewsAC = slice.actions.setReviewsAC;\nexport const setLoadingAC = slice.actions.setLoadingAC;\nexport const setErrorAC = slice.actions.setErrorAC;\nexport const reviewsTC = tsId => dispatch => {\n  setLoadingAC(true);\n  reviewsApi.getReviews(tsId).then(res => {\n    var _res$data;\n    console.log('REVIEWS>>>', res.data.response.data.shop.reviews);\n    dispatch(setReviewsAC({\n      reviews: res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.shops,\n      tsId\n    }));\n    setLoadingAC(false);\n  }).catch(error => {\n    dispatch({\n      type: 'reviews/error',\n      payload: error.message\n    });\n    setErrorAC('Something went wrong:(');\n  });\n};","map":{"version":3,"names":["createSlice","reviewsApi","initialState","reviews","loading","error","slice","name","reducers","setReviewsAC","state","action","payload","tsId","setLoadingAC","setErrorAC","reviewsReducer","reducer","actions","reviewsTC","dispatch","getReviews","then","res","_res$data","console","log","data","response","shop","shops","catch","type","message"],"sources":["/Applications/work/test_tasks/coding-challenge-consumer-semen/src/redux/reviews-reducer.ts"],"sourcesContent":["import { Dispatch } from 'redux';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Shop } from './types/Shop';\nimport { shopsApi } from '../api/shops-api';\nimport { Review } from './types/Review';\nimport { reviewsApi } from '../api/reviews-api';\n\nexport type ReviewsState = {\n  reviews: {\n    [tsId: string]: Array<Review>;\n  };\n  loading: boolean;\n  error: string | null;\n};\n\nconst initialState: ReviewsState = {\n  reviews: {},\n  loading: false,\n  error: null,\n};\nconst slice = createSlice({\n  name: 'ReviewsReducer',\n  initialState: initialState,\n  reducers: {\n    setReviewsAC(state, action: PayloadAction<{tsId: string; reviews: Array<Review>;}>) {\n      state.reviews[action.payload.tsId] = action.payload.reviews;\n    },\n    setLoadingAC(state, action: PayloadAction<boolean>) {\n      state.loading = action.payload;\n    },\n    setErrorAC(state, action: PayloadAction<string | null>) {\n      state.error = action.payload;\n    },\n  }\n});\n\nexport const reviewsReducer = slice.reducer;\nexport const setReviewsAC = slice.actions.setReviewsAC;\nexport const setLoadingAC = slice.actions.setLoadingAC;\nexport const setErrorAC = slice.actions.setErrorAC;\n\n\nexport const reviewsTC = (tsId: string) => (dispatch: Dispatch) => {\n  setLoadingAC(true);\n  reviewsApi.getReviews(tsId)\n    .then((res) => {\n      console.log('REVIEWS>>>', res.data.response.data.shop.reviews);\n      dispatch(setReviewsAC({ reviews: res?.data?.shops, tsId }));\n      setLoadingAC(false);\n    })\n    .catch((error) => {\n      dispatch({ type: 'reviews/error', payload: error.message });\n      setErrorAC('Something went wrong:(');\n    });\n};\n"],"mappings":"AACA,SAASA,WAAW,QAAuB,kBAAkB;AAI7D,SAASC,UAAU,QAAQ,oBAAoB;AAU/C,MAAMC,YAA0B,GAAG;EACjCC,OAAO,EAAE,CAAC,CAAC;EACXC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE;AACT,CAAC;AACD,MAAMC,KAAK,GAAGN,WAAW,CAAC;EACxBO,IAAI,EAAE,gBAAgB;EACtBL,YAAY,EAAEA,YAAY;EAC1BM,QAAQ,EAAE;IACRC,YAAYA,CAACC,KAAK,EAAEC,MAA8D,EAAE;MAClFD,KAAK,CAACP,OAAO,CAACQ,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,GAAGF,MAAM,CAACC,OAAO,CAACT,OAAO;IAC7D,CAAC;IACDW,YAAYA,CAACJ,KAAK,EAAEC,MAA8B,EAAE;MAClDD,KAAK,CAACN,OAAO,GAAGO,MAAM,CAACC,OAAO;IAChC,CAAC;IACDG,UAAUA,CAACL,KAAK,EAAEC,MAAoC,EAAE;MACtDD,KAAK,CAACL,KAAK,GAAGM,MAAM,CAACC,OAAO;IAC9B;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAMI,cAAc,GAAGV,KAAK,CAACW,OAAO;AAC3C,OAAO,MAAMR,YAAY,GAAGH,KAAK,CAACY,OAAO,CAACT,YAAY;AACtD,OAAO,MAAMK,YAAY,GAAGR,KAAK,CAACY,OAAO,CAACJ,YAAY;AACtD,OAAO,MAAMC,UAAU,GAAGT,KAAK,CAACY,OAAO,CAACH,UAAU;AAGlD,OAAO,MAAMI,SAAS,GAAIN,IAAY,IAAMO,QAAkB,IAAK;EACjEN,YAAY,CAAC,IAAI,CAAC;EAClBb,UAAU,CAACoB,UAAU,CAACR,IAAI,CAAC,CACxBS,IAAI,CAAEC,GAAG,IAAK;IAAA,IAAAC,SAAA;IACbC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEH,GAAG,CAACI,IAAI,CAACC,QAAQ,CAACD,IAAI,CAACE,IAAI,CAAC1B,OAAO,CAAC;IAC9DiB,QAAQ,CAACX,YAAY,CAAC;MAAEN,OAAO,EAAEoB,GAAG,aAAHA,GAAG,wBAAAC,SAAA,GAAHD,GAAG,CAAEI,IAAI,cAAAH,SAAA,uBAATA,SAAA,CAAWM,KAAK;MAAEjB;IAAK,CAAC,CAAC,CAAC;IAC3DC,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC,CAAC,CACDiB,KAAK,CAAE1B,KAAK,IAAK;IAChBe,QAAQ,CAAC;MAAEY,IAAI,EAAE,eAAe;MAAEpB,OAAO,EAAEP,KAAK,CAAC4B;IAAQ,CAAC,CAAC;IAC3DlB,UAAU,CAAC,wBAAwB,CAAC;EACtC,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}