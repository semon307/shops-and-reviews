{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nexport const useEffectOnce = (effect, deps) => {\n  _s();\n  const destroyFunc = useRef();\n  const effectCalled = useRef(false);\n  const renderAfterCalled = useRef(false);\n  const [val, setVal] = useState(0);\n  if (effectCalled.current) {\n    renderAfterCalled.current = true;\n  }\n  useEffect(() => {\n    if (!effectCalled.current) {\n      destroyFunc.current = effect();\n      effectCalled.current = true;\n    }\n    setVal(val + 1);\n    return () => {\n      if (!renderAfterCalled.current) {\n        return;\n      }\n      if (destroyFunc.current) {\n        destroyFunc.current();\n      }\n    };\n  }, deps);\n};\n_s(useEffectOnce, \"HYhMZy6Xz6sFfDRJNxQPOEPefdA=\");","map":{"version":3,"names":["useEffect","useRef","useState","useEffectOnce","effect","deps","_s","destroyFunc","effectCalled","renderAfterCalled","val","setVal","current"],"sources":["/Applications/work/test_tasks/coding-challenge-consumer-semen/src/common/hooks/use-effect-once.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nexport const useEffectOnce = (effect: () => void | (() => void), deps: any[]) => {\n  const destroyFunc = useRef<void | (() => void)>();\n  const effectCalled = useRef(false);\n  const renderAfterCalled = useRef(false);\n  const [val, setVal] = useState<number>(0);\n\n  if (effectCalled.current) {\n    renderAfterCalled.current = true;\n  }\n\n  useEffect(() => {\n    if (!effectCalled.current) {\n      destroyFunc.current = effect();\n      effectCalled.current = true;\n    }\n\n    setVal(val + 1);\n\n    return () => {\n      if (!renderAfterCalled.current) {\n        return;\n      }\n      if (destroyFunc.current) {\n        destroyFunc.current();\n      }\n    };\n  }, deps);\n};\n\n\n\n\n\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,OAAO,MAAMC,aAAa,GAAGA,CAACC,MAAiC,EAAEC,IAAW,KAAK;EAAAC,EAAA;EAC/E,MAAMC,WAAW,GAAGN,MAAM,CAAsB,CAAC;EACjD,MAAMO,YAAY,GAAGP,MAAM,CAAC,KAAK,CAAC;EAClC,MAAMQ,iBAAiB,GAAGR,MAAM,CAAC,KAAK,CAAC;EACvC,MAAM,CAACS,GAAG,EAAEC,MAAM,CAAC,GAAGT,QAAQ,CAAS,CAAC,CAAC;EAEzC,IAAIM,YAAY,CAACI,OAAO,EAAE;IACxBH,iBAAiB,CAACG,OAAO,GAAG,IAAI;EAClC;EAEAZ,SAAS,CAAC,MAAM;IACd,IAAI,CAACQ,YAAY,CAACI,OAAO,EAAE;MACzBL,WAAW,CAACK,OAAO,GAAGR,MAAM,CAAC,CAAC;MAC9BI,YAAY,CAACI,OAAO,GAAG,IAAI;IAC7B;IAEAD,MAAM,CAACD,GAAG,GAAG,CAAC,CAAC;IAEf,OAAO,MAAM;MACX,IAAI,CAACD,iBAAiB,CAACG,OAAO,EAAE;QAC9B;MACF;MACA,IAAIL,WAAW,CAACK,OAAO,EAAE;QACvBL,WAAW,CAACK,OAAO,CAAC,CAAC;MACvB;IACF,CAAC;EACH,CAAC,EAAEP,IAAI,CAAC;AACV,CAAC;AAACC,EAAA,CA3BWH,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}